(this["webpackJsonphomestuck-search"]=this["webpackJsonphomestuck-search"]||[]).push([[0],[,,,,,function(e,t,n){"use strict";var a=n(3),r=n(0),c=n.n(r),l=n(1);n(26);t.a=function(e){return c.a.createElement("main",{className:"main ".concat(e.className||"")},c.a.createElement("div",{className:"main-middle"},e.children),c.a.createElement("div",{className:"system"},c.a.createElement(a.a,{to:"/"},c.a.createElement(l.h,null)),c.a.createElement(a.a,{to:"/settings"},c.a.createElement(l.i,null)),c.a.createElement(a.a,{className:"edit-link",to:"/edit"},c.a.createElement(l.f,null))),c.a.createElement("div",{className:"user"},c.a.createElement(l.j,{className:"mod-icon"})))}},function(e,t,n){"use strict";var a=n(0),r=n.n(a);n(25);t.a=function(e){var t=Object(a.createRef)();return Object(a.useLayoutEffect)((function(){var n=new Image;function a(){if(t.current){t.current.getContext("2d").clearRect(0,0,t.current.width,t.current.height),t.current.width=window.innerWidth,t.current.height=window.innerHeight;var e=n.height/n.width*window.innerWidth;e<window.innerHeight?t.current.getContext("2d").drawImage(n,0,0,n.width/n.height*window.innerHeight,window.innerHeight):t.current.getContext("2d").drawImage(n,0,0,window.innerWidth,e)}}return n.src=e.src,n.addEventListener("load",a),window.addEventListener("resize",a),function(){n.removeEventListener("load",a),window.removeEventListener("resize",a)}}),[t,e]),r.a.createElement("div",{className:"background"},r.a.createElement("canvas",{width:window.innerWidth,height:window.innerHeight,ref:t}))}},,,function(e,t,n){"use strict";var a=n(2),r=n(0),c=n.n(r),l=n(1);n(27);t.a=function(e){var t=Object(r.useState)(!1),n=Object(a.a)(t,2),i=n[0],o=n[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("aside",{className:"sidebar".concat(i?" visible":"")},c.a.createElement("div",{className:"sidebar-controls ".concat(i?"close":"open")},c.a.createElement("button",{className:"sidebar-button ".concat(i?"close":"open"),onClick:function(){o(!i)}},c.a.createElement(l.b,null),c.a.createElement("h2",null,e.title)),e.clearSearch?c.a.createElement("button",{className:"sidebar-button",onClick:e.clearSearch},c.a.createElement(l.e,null)):null),c.a.createElement("div",{className:"sidebar-inner"},e.children)))}},,,function(e,t,n){e.exports=n(29)},,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),l=n.n(c),i=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function o(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var s=n(3),u=(n(23),n(2)),m=n(1),h=(n(24),n(6)),d=n(5),f=n(9),v=(n(28),function(e){var t=Object(a.createRef)();return Object(a.useLayoutEffect)((function(){var n=new Image;n.src=e.src;var a=n.addEventListener("load",(function(){t.current&&(t.current.getContext("2d").clearRect(0,0,e.width,e.height),t.current.getContext("2d").drawImage(n,0,0))}));return function(){n.removeEventListener("load",a)}}),[t,e]),r.a.createElement("canvas",{width:e.width,height:e.height,className:"static-canvas",ref:t})}),g=Object(a.lazy)((function(){return n.e(4).then(n.bind(null,37))})),b="localhost:3000"===window.location.host?"http://localhost:4000":"https://ahlgreen.net";var p=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)([]),i=Object(u.a)(l,2),o=i[0],s=i[1],p=Object(a.useState)({results:[],id:0,image:"",visible:!1}),E=Object(u.a)(p,2),w=E[0],N=E[1],k=Object(a.useState)(20),j=Object(u.a)(k,2),y=j[0],O=j[1],C=Object(a.useState)(1),S=Object(u.a)(C,2),L=S[0],x=S[1],W=Object(a.createRef)(),R=Object(a.createRef)();return Object(a.useEffect)((function(){fetch("".concat(b,"/api/app/1/tags")).then((function(e){return e.json()})).then((function(e){e.sort((function(e,t){return e.position-t.position})),s(e)}))}),[]),r.a.createElement(d.a,{className:"home-page",title:"Homestuck Search Engine"},r.a.createElement(h.a,{src:"https://pipe.miroware.io/5bc7665ecc3313406322aba0/dirk_bg_earthC.png"}),r.a.createElement("nav",{className:"page-nav"},r.a.createElement("ul",null,r.a.createElement("li",{className:L>1?"enabled":"",onClick:function(e){e.target.classList.contains("enabled")&&(x(L-1),window.scrollTo({top:0,behavior:"smooth"}))}},r.a.createElement(m.b,null)),r.a.createElement("li",{className:"pages"},function(){var e=[];if(y>0){var t=Math.ceil(n.length/y),a=L-5;a<1&&(a=1);var c=a+9;c>t&&(c=t);for(var l=a;l<=c;l++)e.push(r.a.createElement("button",{className:L===l?"current":"",key:l,onClick:function(e){x(parseInt(e.target.innerText)),window.scrollTo({top:0,behavior:"smooth"})}},l))}return e}()),r.a.createElement("li",{className:L<Math.ceil(n.length/y)?"enabled":"",onClick:function(e){e.target.classList.contains("enabled")&&(x(L+1),window.scrollTo({top:0,behavior:"smooth"}))}},r.a.createElement(m.c,null)))),r.a.createElement("form",{className:"search-form",onSubmit:function(e){e.preventDefault();for(var t,n=W.current.value,a=!0,r=[],l="",i=[],s=0,u=0;u<=n.length;u++)if(","!==n[u]&&u!==n.length)if("("!==n[u])if("-"!==n[u])if(")"!==n[u])if(" "!==n[u]||a){if(" "!==n[u]){var m=n.charCodeAt(u);m<=57&&m>=48?t&&(1===s?t[0]+=n[u]:2===s&&(t[1]+=n[u])):l+=m<=90&&m>=65?String.fromCharCode(m-65+97):n[u],a=!1}}else l+=" ",a=!0;else s=0,t=null;else s=2;else s=1,i.push(["",""]),t=i[i.length-1];else{var h=l.trimRight();h.length>0&&r.push(h),l="",a=!0}for(var d=0;d<r.length;d++)for(var f=!1,v=0;v<o.length;v++){for(var g=0;g<o[v].tags.length;g++)if(o[v].tags[g].synonyms.includes(r[d])){r[d]=o[v].tags[g].title,f=!0;break}if(f)break}fetch("".concat(b,"/api/app/1/search"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tags:r,ranges:i})}).then((function(e){return e.json()})).then((function(e){e.error?console.error(e.error):(c(e),x(1))}))}},r.a.createElement("label",{className:"search-term-label",htmlFor:"search-term"},r.a.createElement("input",{ref:W,id:"search-term",className:"search-input",type:"text",autoComplete:"off",placeholder:"Search (ex. 'john, act 1, dad')"}),r.a.createElement("button",{className:"search-button",type:"submit"},r.a.createElement(m.h,null)))),r.a.createElement("div",{className:"results-info"},r.a.createElement("p",{className:"total-results"},"Found ",n.length," results"),r.a.createElement("div",{className:"results-per-page"},r.a.createElement("label",null,"Results per page:"),r.a.createElement("div",{className:"results-input-wrapper"},r.a.createElement("input",{className:"results-input",ref:R,type:"number",defaultValue:y,min:"1",max:"100",onChange:function(){R.current.value<1?R.current.value=1:R.current.value>100&&(R.current.value=100),O(R.current.value),x(1)}})))),r.a.createElement("section",{className:"result-grid"},n.length>0?n.slice(y*(L-1),y*(L-1)+y).map((function(e,t){return r.a.createElement("section",{className:"search-result",key:t},r.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},0===e.type?r.a.createElement(v,{width:"650",height:"450",src:e.thumbnail||e.content}):null,1===e.type?r.a.createElement("div",null,r.a.createElement("p",null,"Flash not functional.")):null),r.a.createElement("div",{className:"search-result-link",onClick:function(){N({id:y*(L-1)+t,visible:!0})}},r.a.createElement(m.g,null)))})):r.a.createElement("p",{className:"no-results"},"No results")),r.a.createElement("div",{className:"to-top",onClick:function(){window.scrollTo({top:0,behavior:"smooth"})}},r.a.createElement(m.a,null)),r.a.createElement(f.a,{title:"Tags",clearSearch:function(){W.current.value=""}},o.map((function(e,t){return r.a.createElement("ul",{key:t},r.a.createElement("li",null,e.category,r.a.createElement("ul",{className:"sidebar-text focusable"},e.tags.map((function(e,t){return r.a.createElement("li",{key:t,onClick:function(){!function(e){for(var t=W.current.value.length-1;t>=0&&","!==W.current.value[t];t--)if(" "!==W.current.value[t]){W.current.value+=",";break}W.current.value+=e,W.current.scrollLeft=W.current.scrollWidth}(e.title)}},e.title)})))))}))),r.a.createElement(g,Object.assign({hideLightbox:function(){N({visible:!1})},loadPrevious:function(){w.id>0&&N({id:w.id-1,visible:!0})},loadNext:function(){w.id<n.length-1&&N({id:w.id+1,visible:!0})},results:n},w)))},E=Object(a.lazy)((function(){return n.e(5).then(n.bind(null,34))})),w=Object(a.lazy)((function(){return n.e(3).then(n.bind(null,35))})),N=Object(a.lazy)((function(){return n.e(6).then(n.bind(null,36))})),k="localhost:3000"===window.location.host?"":"/app/hsse";l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(s.c,null,r.a.createElement(p,{path:"".concat(k,"/")}),r.a.createElement(E,{path:"".concat(k,"/login")}),r.a.createElement(w,{path:"".concat(k,"/edit")}),r.a.createElement(N,{path:"".concat(k,"/settings")})))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");i?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):o(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):o(t,e)}))}}()}],[[12,1,2]]]);
//# sourceMappingURL=main.cacc9466.chunk.js.map